<!DOCTYPE html>
<html lang="de">
<head>
    <title>Küfa Karben | Neue Veranstaltung</title>
    {{template "htmlHead" .}}
</head>
<body>
    {{template "header" .}}
    <section id="createEvent">
        <h4>Neue Veranstaltung</h4>
        <form id="createEventForm" name="createEvent" enctype="multipart/form-data" oninput="preview()"
              action="/event/add" method="post">
            <div id="flexcontainer">
                <input name="theme" type="text" placeholder="Motto" required>
                <input name="date" type="datetime-local" value="2011-11-11T11:11" id="dateSelector" onchange="updateClosingDate()" required>
                <input name="starter" type="text" placeholder="Vorspeiße" required>
                <input name="main-dish" type="text" placeholder="Hauptgericht" required>
                <input name="dessert" type="text" placeholder="Nachtisch" required>
                <input id="eventImageInput" name="image" type="file" accept="image/*" onchange="previewImage(this)"
                       required>
                <img src="" style="display:none" id="imagePreview">
                <textarea name="info" placeholder="Beschreibung" rows="6" required></textarea>
                <label>Anmeldeschluss:<input name="closingDate" id="closingDateSelector" type="datetime-local" value="2011-11-11T11:11"
                    required></label>
            </div>
            <input class="buttonRight" type="submit" value="Speichern">
        </form>
    </section>
    <section id="main">
        <h1 id="motto"></h1>
        <h2 id="date"></h2>
        <img id="titleImage" src="" title="">
        <br>
        <h3>Vorspeise</h3>
        <p id="vorspeiseText"></p>
        <span class="stars">★★★</span>
        <h3>Hauptgang</h3>
        <p id="hauptgangText"></p>
        <span class="stars">★★★</span>
        <h3>Nachspeise</h3>
        <p id="nachspeiseText"></p>
        <span class="stars">★★★</span>
        <br>
        <p id="infoText"></p>
    </section>
    <script>
        var tzoffset = (new Date()).getTimezoneOffset() * 60000;
        var localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);
        var localISOTimeMinusOneDay = (new Date(Date.now() - tzoffset-(24*60*60*1000))).toISOString().slice(0, -1);

        var dtlInput = document.getElementById('dateSelector');
        var closingDateInput = document.getElementById('closingDateSelector');

        dtlInput.value = localISOTime.slice(0, 16);
        closingDateInput.value = localISOTimeMinusOneDay.slice(0,16);
    </script>
    {{template "footer" .}}
</body>
</html>